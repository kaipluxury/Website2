<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Verify Access - GrandX $tore</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="particles"></canvas>

  <nav class="navbar">
    <img src="IMG_1096.jpeg" alt="GrandX Logo" class="nav-logo">
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="payment.html">Payment</a></li>
      <li><a href="tos.html">TOS</a></li>
      <li><a href="verify.html">Verify</a></li>
    </ul>
  </nav>

  <header class="hero">
    <h1><span class="glow-pink">Script</span> <span class="glow-white">Access</span></h1>
    <p class="quote">Enter your key to download your exclusive script.</p>
  </header>

  <section class="verify-form">
    <select id="roleSelect">
      <option value="">Select Role</option>
      <option value="leader">Leader</option>
      <option value="admin">Admin</option>
    </select>

    <select id="orgSelect">
      <option value="">Select Organization</option>
    </select>

    <input type="text" id="keyInput" placeholder="Enter your access key" />
    <button onclick="verifyKey()">Verify & Download</button>
    <p id="result" class="quote"></p>
    <p class="get-key">Want a Key? <a href="https://discord.gg/Ft629G5RZE" target="_blank">Open Ticket in Discord</a></p>
  </section>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-branding">
        <p><strong>GrandX $tore</strong></p>
        <p>Â© 2025 GrandX $tore. All rights reserved.</p>
      </div>
      <div class="footer-links">
        <h3>Navigation</h3>
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="payment.html">Payment</a>
        <a href="tos.html">TOS</a>
      </div>
      <div class="footer-socials">
        <h3>Socials</h3>
        <a href="https://discord.gg/Ft629G5RZE">Discord</a>
        <a href="https://t.me/+dmVBozU2KMRjZWU1">Telegram</a>
        <a href="https://www.instagram.com/grandxstore">Instagram</a>
      </div>
    </div>
  </footer>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbz3C1PZzYbJZoUPlr1D7qkzFzT4UOE_your_deployed_url/exec";

    const roleSelect = document.getElementById('roleSelect');
    const orgSelect = document.getElementById('orgSelect');
    const result = document.getElementById('result');

    const orgs = {
      leader: ["ems", "sahp", "ng", "fib", "gov", "gangs"],
      admin: ["admin1", "admin2"]
    };

    roleSelect.addEventListener('change', () => {
      orgSelect.innerHTML = '<option value="">Select Organization</option>';
      const selectedRole = roleSelect.value;
      if (orgs[selectedRole]) {
        orgs[selectedRole].forEach(org => {
          const opt = document.createElement('option');
          opt.value = org;
          opt.innerText = org.toUpperCase();
          orgSelect.appendChild(opt);
        });
      }
    });

    async function verifyKey() {
      const role = roleSelect.value;
      const org = orgSelect.value;
      const key = document.getElementById('keyInput').value;

      result.innerText = "Checking...";
      result.style.color = "white";

      const res = await fetch(`${scriptURL}?key=${key}&role=${role}&org=${org}`);
      const text = await res.text();

      if (text.startsWith("VALID:")) {
        const file = text.split(":")[1];
        result.innerText = "Access granted. Downloading...";
        window.location.href = file;
      } else {
        result.innerText = text;
        result.style.color = "red";
      }
    }
  </script>

  <script>
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const particles = [];

    for (let i = 0; i < 80; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.5,
        dx: Math.random() - 0.5,
        dy: Math.random() - 0.5
      });
    }

    function animateParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
      particles.forEach(p => {
        p.x += p.dx;
        p.y += p.dy;
        if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fill();
      });
      requestAnimationFrame(animateParticles);
    }

    animateParticles();
  </script>
</body>
</html>
