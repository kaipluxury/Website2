<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Verify Key - GrandX $tore</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="particles"></canvas>

  <nav class="navbar">
    <img src="IMG_1096.jpeg" alt="GrandX Logo" class="nav-logo">
    <ul class="nav-links">
      <li><a href="index.html">Home</a></li>
      <li><a href="products.html">Products</a></li>
      <li><a href="payment.html">Payment</a></li>
      <li><a href="tos.html">TOS</a></li>
      <li><a href="verify.html">Verify</a></li>
    </ul>
  </nav>

  <header class="hero">
    <h1><span class="glow-pink">Script</span> <span class="glow-white">Verification</span></h1>
    <p class="quote">Enter your key and download your exclusive file</p>
  </header>

  <section class="verify-section">
    <div class="verify-container">
      <select id="role" onchange="toggleOrgDropdown()">
        <option disabled selected>Select Role</option>
        <option value="Leader">Leader</option>
        <option value="Admin">Admin</option>
      </select>

      <select id="org" style="display: none;">
        <option disabled selected>Select Organization</option>
        <option value="EMS">EMS</option>
        <option value="SAHP">SAHP</option>
        <option value="NG">NG</option>
        <option value="FIB">FIB</option>
        <option value="GOV">GOV</option>
        <option value="GANGS">GANGS</option>
        <option value="Admin Level 1">Admin Level 1</option>
        <option value="Admin Level 2">Admin Level 2</option>
      </select>

      <input type="text" id="key" placeholder="Enter your access key" />
      <button onclick="verifyKey()">Verify & Download</button>
    </div>
    <p class="verify-note">Want a Key? <a href="https://discord.gg/Ft629G5RZE" target="_blank">Open Ticket in Discord</a></p>
  </section>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-branding">
        <p><strong>GrandX $tore</strong></p>
        <p>Â© 2025 GrandX $tore. All rights reserved.</p>
      </div>
      <div class="footer-links">
        <h3>Navigation</h3>
        <a href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="payment.html">Payment</a>
        <a href="tos.html">TOS</a>
      </div>
      <div class="footer-socials">
        <h3>Socials</h3>
        <a href="https://discord.gg/Ft629G5RZE">Discord</a>
        <a href="https://t.me/+dmVBozU2KMRjZWU1">Telegram</a>
        <a href="https://www.instagram.com/grandxstore">Instagram</a>
      </div>
    </div>
  </footer>

  <script>
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const particles = [];

    for (let i = 0; i < 100; i++) {
      particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 1.5 + 0.5,
        dx: Math.random() - 0.5,
        dy: Math.random() - 0.5
      });
    }

    function animateParticles() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
      particles.forEach(p => {
        p.x += p.dx;
        p.y += p.dy;
        if (p.x < 0 || p.x > canvas.width) p.dx *= -1;
        if (p.y < 0 || p.y > canvas.height) p.dy *= -1;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fill();
      });
      requestAnimationFrame(animateParticles);
    }

    animateParticles();

    function toggleOrgDropdown() {
      const role = document.getElementById("role").value;
      const orgSelect = document.getElementById("org");
      orgSelect.style.display = role === "Leader" || role === "Admin" ? "inline-block" : "none";
      orgSelect.innerHTML = '';

      const options = {
        Leader: ["EMS", "SAHP", "NG", "FIB", "GOV", "GANGS"],
        Admin: ["Admin Level 1", "Admin Level 2"]
      };

      const defaultOpt = document.createElement("option");
      defaultOpt.text = "Select Organization";
      defaultOpt.disabled = true;
      defaultOpt.selected = true;
      orgSelect.add(defaultOpt);

      options[role].forEach(org => {
        const opt = document.createElement("option");
        opt.value = org;
        opt.text = org;
        orgSelect.add(opt);
      });
    }

    function verifyKey() {
      const role = document.getElementById("role").value;
      const org = document.getElementById("org").value;
      const key = document.getElementById("key").value;

      if (!role || !org || !key) {
        alert("Please select role, organization, and enter your key.");
        return;
      }

      const url = "https://script.google.com/macros/s/AKfycbw0gAHKnoE3VtPbYmcgyqWWGqu9I3H0zDGcgzOk5UvJbPjeB5XCM2-j4JQ2bK3H8vTD/exec";
      const params = new URLSearchParams({
        role: role,
        org: org,
        key: key
      });

      fetch(`${url}?${params}`)
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            window.location.href = data.link;
          } else {
            alert("Invalid or already used key.");
          }
        })
        .catch(err => {
          console.error(err);
          alert("Something went wrong. Try again.");
        });
    }
  </script>
</body>
</html>
